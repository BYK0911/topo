!function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=7)}([function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(3),s=o(1),a=function(t){function e(){var e=t.call(this)||this;return e.type="TopoEdge",e.points=[],e.lineDash=[0],e.lineWidth=1,e.color="#666",e}return r(e,t),e.prototype.render=function(t){t.beginPath(),this.points.forEach((function(e,o){0===o?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y)})),t.setLineDash(this.lineDash),t.lineWidth=this.lineWidth,t.strokeStyle=this.color,t.stroke(),t.closePath()},e.prototype.contain=function(t,e){var o=this.points[0],n=o.x,r=o.y,i=this.points[this.points.length-1],a=i.x,u=i.y;return s.default(n,r,a,u,t,e)},e}(i.default);e.default=a},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(12);e.default=function(t,e,o,r,i,s){var a=[o-t,r-e],u=[i-t,s-e],c=n.default.norm(a);return n.default.norm(u)<=2||!!(c&&n.default.crossNorm(a,u)/c<=2)}},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(3),s=o(5),a=function(t){function e(){var e=t.call(this)||this;return e.type="TopoBlock",e.x=0,e.y=0,e.width=0,e.height=0,e.rotation=0,e.scale=1,e}return r(e,t),e.prototype.contain=function(t,e){var o=this.width,n=this.height,r=this.getRelativeCoord(t,e);return t=r.x,e=r.y,t>=-o/2&&t<=o/2&&e>=-n/2&&e<=n/2},e.prototype.translate=function(t,e){this.x+=t,this.y+=e},e.prototype.rotate=function(t){this.rotation=(this.rotation+t)%360},e.prototype.zoom=function(t){this.scale*=t?1.1:1/1.1},e.prototype.getRelativeCoord=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var o=new s.default(t,e);return o.translate(-this.x,-this.y),o.scale(1/this.scale,1/this.scale),o.rotate(-this.rotation),o},e.prototype.getAbsoluteCoord=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var o=new s.default(t,e);return o.rotate(this.rotation),o.scale(this.scale,this.scale),o.translate(this.x,this.y),o},e}(i.default);e.default=a},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(11),s=0,a=function(t){function e(){var e=t.call(this)||this;return e.id="TopoElement_"+s++,e.type="TopoElement",e.root=null,e.parent=null,e.visible=!0,e}return r(e,t),e.prototype.render=function(t){},e.prototype.contain=function(t,e){return!1},e.prototype.show=function(){this.visible=!0},e.prototype.hide=function(){this.visible=!1},e}(i.default);e.default=a},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=new WeakMap,r=function(){function t(){}return t.prototype.has=function(t,e,o){var r,i=n.has(t);return i&&(i=(r=n.get(t)[e])&&r.includes(o)),i},t.prototype.add=function(t,e,o){var r;n.has(t)?r=n.get(t):(r={},n.set(t,r)),r[e]=r[e]||[],r[e].push(o)},t.prototype.remove=function(t,e,o){if(e)if(o){var r=n.get(t)[e],i=r.indexOf(o);i>-1&&r.splice(i,1)}else n.get(t)[e]=[];else n.delete(t)},t.prototype.match=function(t,e){return n.has(t)?n.get(t)[e]:null},t}();e.default=new r},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.matrix=function(t,e,o,n,r,i){var s=this.x,a=this.y;return this.x=t*s+e*a+o,this.y=n*s+r*a+i,this},t.prototype.translate=function(t,e){return this.matrix(1,0,t,0,1,e)},t.prototype.scale=function(t,e){return this.matrix(t,0,0,0,e,0)},t.prototype.rotate=function(t){t=t/180*Math.PI;var e=Math.cos(t),o=Math.sin(t);return this.matrix(e,-o,0,o,e,0)},t.prototype.skewX=function(t){t=t/180*Math.PI;var e=Math.tan(t);return this.matrix(1,e,0,0,1,0)},t.prototype.skewY=function(t){t=t/180*Math.PI;var e=Math.tan(t);return this.matrix(1,0,0,e,1,0)},t}();e.default=n},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=t.call(this)||this;return e.type="TopoGroup",e.elements=[],e}return r(e,t),e.prototype.render=function(t){t.save(),t.translate(this.x,this.y),this.elements.forEach((function(e){return e.render(t)}))},e.prototype.contain=function(t,e){var o=this.x,n=this.y,r=this.width,i=this.height;return t>=o&&t<=o+r&&e>=n&&e<=n+i},e.prototype.add=function(t){this.elements.includes(t)||(t.parent=this,t.root=this.root||this,this.elements.push(t))},e.prototype.remove=function(t){var e=this.elements.indexOf(t);e>-1&&(this.elements.splice(e,1),t.parent=null,t.root=null)},e.prototype.clear=function(){this.elements.forEach((function(t){t.parent=null,t.root=null})),this.elements=[]},e}(o(2).default);e.default=i},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),o(8)},function(t,e,o){"use strict";var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<o;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,r++)n[r]=i[s];return n};Object.defineProperty(e,"__esModule",{value:!0});var r=o(9),i=r.default.init();i.rotate(15),i.translate(300,0),i.resize(window.innerWidth,window.innerHeight),document.body.style.margin="0",document.body.appendChild(i.canvas);!function(t,e){var o=[],s={},a=[];t.forEach((function(t){var e=new r.default.TopoNode;Object.assign(e,t),o.push(e),s[t.id]=e})),e.forEach((function(t){var e=new r.default[t.type];e.lineWidth=t.lineWidth,e.lineDash=t.lineDash,e.color=t.color,t.points.forEach((function(t){var o={};Object.defineProperties(o,{x:{get:function(){return s[t].getAbsoluteCoord().x}},y:{get:function(){return s[t].getAbsoluteCoord().y}}}),e.points.push(o)})),a.push(e)})),i.elements=n(a,o)}([{type:"TopoNode",id:"0",x:100,y:100},{type:"TopoNode",id:"1",x:200,y:100},{type:"TopoNode",id:"2",x:300,y:100},{type:"TopoNode",id:"3",x:400,y:100},{type:"TopoNode",id:"4",x:300,y:200},{type:"TopoNode",id:"5",x:400,y:200},{type:"TopoNode",id:"6",x:500,y:200}],[{type:"TopoEdge",points:["1","4"],lineWidth:1,color:"#333",lineDash:[0]},{type:"TopoZEdge",points:["2","5"],lineWidth:1,color:"#333",lineDash:[5,5]},{type:"TopoSEdge",points:["3","6"],lineWidth:1,color:"#fa5",lineDash:[0]}]),function t(){window.requestAnimationFrame(t),i.render()}()},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(10),r=o(0),i=o(13),s=o(14),a=o(15),u={TopoNode:n.default,TopoEdge:r.default,TopoZEdge:i.default,TopoSEdge:s.default,init:function(){var t=new a.default,e=0,o=0;return t.on("mousewheel",(function(e){var o=e.originalEvent,n=o.wheelDelta||o.detail,r=t.scale;t.zoom(n>0),t.translate(e.x/t.scale-e.x/r,e.y/t.scale-e.y/r)})),t.on("dragstart",(function(t){t.stopPropergation(),e=t.originalEvent.offsetX,o=t.originalEvent.offsetY})),t.on("drag",(function(t){t.stopPropergation();var n=t.target.getRelativeCoord(e,o),r=n.x,i=n.y,s=t.target.getRelativeCoord(t.originalEvent.offsetX,t.originalEvent.offsetY),a=s.x-r,u=s.y-i;t.target.translate(a,u),e=t.originalEvent.offsetX,o=t.originalEvent.offsetY})),t}};e.default=u},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=t.call(this)||this;return e.type="TopoNode",e.width=50,e.height=50,e}return r(e,t),e.prototype.render=function(t){var e=this.x,o=this.y,n=this.width,r=this.height;e-=n/2,o-=r/2,t.save(),t.translate(e,o),t.scale(this.scale,this.scale),t.rotate(this.rotation/180*Math.PI),t.fillStyle="#fa5",t.fillRect(0,0,n,r),t.restore()},e}(o(2).default);e.default=i},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(4),r=function(){function t(){}return t.prototype.on=function(t,e){n.default.has(this,t,e)||n.default.add(this,t,e)},t.prototype.off=function(t,e){n.default.remove(this,t,e)},t.prototype.dispatch=function(t){t.target=this,t.path=[this],t.trigger()},t}();e.default=r},function(t,e,o){"use strict";var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<o;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,r++)n[r]=i[s];return n};Object.defineProperty(e,"__esModule",{value:!0});var r={add:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=[];return t.forEach((function(t){t.forEach((function(t,e){o[e]=o[e]?o[e]+t:t}))})),o},deduct:function(t,e){var o=n(t);return e.forEach((function(t,e){o[e]=(o[e]||0)-t})),o},norm:function(t){if(0!==t.length)return Math.pow(t.reduce((function(t,e){return t+e*e}),0),1/t.length)},dot:function(t,e){for(var o=Math.min(t.length,e.length),n=0,r=-1;++r<o;)n+=t[r]*e[r];return n},crossNorm:function(t,e){return Math.abs(t[0]*e[1]-t[1]*e[0])},multiply:function(t,e){return t.map((function(t){return t*e}))},cos:function(t,e){return this.dot(t,e)/this.norm(t)/this.norm(e)},angle:function(t,e){return Math.acos(this.cos(t,e))}};e.default=r},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(0),s=o(1),a=function(t){function e(){var e=t.call(this)||this;return e.type="TopoZEdge",e}return r(e,t),e.prototype.render=function(t){var e=this.points,o=e[0],n=o.x,r=o.y,i=e[1],s=i.x,a=i.y;t.beginPath(),t.moveTo(n,r),t.lineTo((n+s)/2,r),t.lineTo((n+s)/2,a),t.lineTo(s,a),t.setLineDash(this.lineDash),t.lineWidth=this.lineWidth,t.strokeStyle=this.color,t.stroke(),t.closePath()},e.prototype.contain=function(t,e){for(var o=this.points[0],n=o.x,r=o.y,i=this.points[this.points.length-1],a=i.x,u=i.y,c=(n+a)/2,f=[[n,r],[c,r],[c,u],[a,u]],l=-1;++l<3;)if(s.default(f[l][0],f[l][1],f[l+1][0],f[l+1][1],t,e))return!0;return!1},e}(i.default);e.default=a},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(0),s=o(1),a=function(t){function e(){var e=t.call(this)||this;return e.type="TopoSEdge",e}return r(e,t),e.prototype.render=function(t){var e=this.points,o=e[0],n=o.x,r=o.y,i=e[1],s=i.x,a=i.y;t.beginPath(),t.moveTo(n,r),t.lineTo(n,(r+a)/2),t.lineTo(s,(r+a)/2),t.lineTo(s,a),t.setLineDash(this.lineDash),t.lineWidth=this.lineWidth,t.strokeStyle=this.color,t.stroke(),t.closePath()},e.prototype.contain=function(t,e){for(var o=this.points[0],n=o.x,r=o.y,i=this.points[this.points.length-1],a=i.x,u=i.y,c=(r+u)/2,f=[[n,r],[n,c],[a,c],[a,u]],l=-1;++l<3;)if(s.default(f[l][0],f[l][1],f[l+1][0],f[l+1][1],t,e))return!0;return!1},e}(i.default);e.default=a},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(16),s=o(6),a=o(5),u=function(t){function e(){var e=t.call(this)||this;return e.type="TopoView",e.scale=1,e.width=500,e.height=400,e.backgroundColor="#f0f0f0",e.canvas=document.createElement("canvas"),e.ctx=e.canvas.getContext("2d"),e.canvas.width=500,e.canvas.height=400,e.canvas.style.width="500px",e.canvas.style.height="400px",e.canvas.style.verticalAlign="middle",i.default(e),e}return r(e,t),e.prototype.render=function(){var t=this;this.ctx.clearRect(0,0,this.width,this.height),this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,this.width,this.height),this.ctx.save(),this.ctx.scale(this.scale,this.scale),this.ctx.translate(this.x,this.y),this.ctx.rotate(this.rotation/180*Math.PI),this.elements.forEach((function(e){e.visible&&e.render(t.ctx)})),this.ctx.restore()},e.prototype.resize=function(t,e){this.width=t,this.height=e,this.canvas.width=t,this.canvas.height=e,this.canvas.style.width=t+"px",this.canvas.style.height=e+"px"},e.prototype.getRelativeCoord=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var o=new a.default(t,e);return o.scale(1/this.scale,1/this.scale),o.translate(-this.x,-this.y),o.rotate(-this.rotation),o},e.prototype.getAbsoluteCoord=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var o=new a.default(t,e);return o.rotate(this.rotation),o.translate(this.x,this.y),o.scale(this.scale,this.scale),o},e.prototype.contain=function(t,e){return!0},e}(s.default);e.default=u},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(17),r=o(6);e.default=function(t){var e,o,i,s=t.canvas,a=function(t,e,o){var r=new n.default(t,o.offsetX,o.offsetY);r.target=e[e.length-1],r.path=e,r.originalEvent=o,r.trigger()},u=[],c={contextmenu:function(t){t.preventDefault()},mousedown:function(t){o=!0,e=!1,a("mousedown",u,t)},mousemove:function(n){if(o)e?a("drag",u,n):(a("dragstart",u,n),e=!0);else{var i=u[u.length-1]||null;!function(e){var o=function(t,e,n){if(t.contain(e,n)&&u.push(t),t instanceof r.default){var i=t.getRelativeCoord(e,n);t.elements.forEach((function(t){return o(t,i.x,i.y)}))}};u=[],o(t,e.offsetX,e.offsetY)}(n);var s=u[u.length-1]||null;i===s?a("mousemove",u,n):(a("mouseenter",[s],n),a("mouseleave",[i],n))}},mouseup:function(t){e?a("dragend",u,t):0===t.button?(0===i&&setTimeout((function(){2===i&&(a("dblclick",u,t),i=0)}),300),a("click",u,t),i++):2===t.button&&a("contextmenu",u,t),a("mouseup",u,t),e=!1,o=!1},mouseenter:function(t){a("mouseenter",u,t)},mouseleave:function(t){e=!1,o=!1,a("mouseleave",u,t)},mousewheel:function(t){t.preventDefault(),a("mousewheel",u,t)},DOMMouseScroll:function(t){t.preventDefault(),a("mousewheel",u,t)}};for(var f in c)s.addEventListener(f,c[f])}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(4),r=function(){function t(t,e,o){this.type=t,this.x=e,this.y=o,this._preventDefault=!1,this._stopPropergation=!1,this.target=null,this.path=[],this.originalEvent=null}return t.prototype.stopPropergation=function(){this._stopPropergation=!0},t.prototype.preventDefault=function(){this._preventDefault=!0},t.prototype.trigger=function(){for(var t,e,o=this,r=this.path.length;--r>-1&&(t=this.path[r],(e=n.default.match(t,this.type))&&e.forEach((function(e){return e.call(t,o)})),!this._stopPropergation););},t}();e.default=r}]);