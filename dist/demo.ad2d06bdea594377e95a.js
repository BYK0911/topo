!function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=6)}([function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(5),a=o(11),s=function(t){function e(){var e=t.call(this)||this;return e.rotation=0,e.scale=1,e.backgroundColor="rgba(255, 255, 255, 0)",e.borderWidth=1,e.borderColor="rgba(255, 255, 255, 0)",e}return r(e,t),e.prototype.drawText=function(t){var e=this,o=e.width,n=e.height,r=e.text,i=e.textColor,a=e.textPosition,s=e.fontSize,u=a.split("-"),h=u[0],f=u[1],c="left"===h?-4:"center"===h?o/2:o+4,l="top"===f?-4:"middle"===f?n/2:n+4;t.textAlign="left"===h?"right":"center"===h?"center":"left",t.textBaseline="top"===f?"bottom":"middle"===f?"middle":"top",t.fillStyle=i,t.font=s+"px Sanserif",t.fillText(r,c,l)},e.prototype.contain=function(t,e){var o=this.width,n=this.height;return t>=0&&t<=o&&e>=0&&e<=n},e.prototype.translate=function(t,e){this.x+=t,this.y+=e},e.prototype.rotate=function(t){this.rotation=(this.rotation+t)%360},e.prototype.zoom=function(t){this.scale*=t?1.1:1/1.1},e.prototype.getRelativeCoord=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var o=new a.default(t,e);return o.translate(-this.x,-this.y),o.scale(1/this.scale,1/this.scale),o.rotate(-this.rotation),o},e.prototype.getAbsoluteCoord=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var o=new a.default(t,e);return o.rotate(this.rotation),o.scale(this.scale,this.scale),o.translate(this.x,this.y),o},e.prototype.resolveCoord=function(t,e,o){void 0===e&&(e=0),void 0===o&&(o=0);for(var n=[],r=[],i=new a.default(e,o),s=this,u=t,h=-1;s;)n.unshift(s),s=s.parent;for(;u;)r.unshift(u),u=u.parent;for(var f=n.length-1;f>=0&&-1===(h=r.indexOf(n[f]));f--)i=n[f].getAbsoluteCoord(i.x,i.y);for(var c=h+1;c<r.length;c++)i=r[c].getRelativeCoord(e,o);return i},e}(i.default);e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(5),a=o(2),s=o(0),u=function(t){function e(){var e=t.call(this)||this;return e.type="TopoEdge",e.points=[],e.lineDash=[0],e.lineWidth=1,e.color="#666",e}return r(e,t),e.prototype.render=function(t){var e=this;t.save(),t.beginPath(),this.points.forEach((function(o,n){var r=e.getCoord(o),i=r.x,a=r.y;0===n?t.moveTo(i,a):t.lineTo(i,a)})),t.globalAlpha=this.opacity,this.shadowBlur&&(t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor),t.setLineDash(this.lineDash),t.lineWidth=this.lineWidth,t.strokeStyle=this.color,t.stroke(),t.closePath(),t.restore()},e.prototype.contain=function(t,e){for(var o=-1,n=this.points.length-1;++o<n;){var r=this.getCoord(this.points[o]),i=r.x,s=r.y,u=this.getCoord(this.points[o+1]),h=u.x,f=u.y;if(a.default(i,s,h,f,t,e))return!0}return!1},e.prototype.getCoord=function(t){return t instanceof s.default?t.resolveCoord(this.parent):t},e}(i.default);e.default=u},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(12);e.default=function(t,e,o,r,i,a){var s=[o-t,r-e],u=[i-t,a-e],h=n.default.norm(s),f=n.default.norm(u),c=n.default.dot(s,u),l=n.default.crossNorm(s,u);return f<=2||c/h>-2&&c/h<=h+2&&l/h<=2}},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(17),a=function(t){function e(){var e=t.call(this)||this;return e.type="TopoView",e.scale=1,e.width=500,e.height=400,e.backgroundColor="#f0f0f0",e.canvas=document.createElement("canvas"),e.ctx=e.canvas.getContext("2d"),e.canvas.width=500,e.canvas.height=400,e.canvas.style.width="500px",e.canvas.style.height="400px",e.canvas.style.verticalAlign="middle",i.default(e),e}return r(e,t),e.prototype.render=function(){var t=this;this.ctx.clearRect(0,0,this.width,this.height),this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,this.width,this.height),this.ctx.save(),this.ctx.translate(this.x,this.y),this.ctx.rotate(this.rotation/180*Math.PI),this.ctx.scale(this.scale,this.scale),this.children.forEach((function(e){e.visible&&e.render(t.ctx)})),this.ctx.restore()},e.prototype.resize=function(t,e){this.width=t,this.height=e,this.canvas.width=t,this.canvas.height=e,this.canvas.style.width=t+"px",this.canvas.style.height=e+"px"},e.prototype.contain=function(t,e){return!0},e}(o(4).default);e.default=a},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(0),a=o(3),s=function(t){function e(){var e=t.call(this)||this;return e.type="TopoGroup",e.backgroundImage="",e.borderColor="#ddd",e.x=0,e.y=0,e.width=0,e.height=0,e.elements=[],e}return r(e,t),Object.defineProperty(e.prototype,"children",{get:function(){return this.elements},enumerable:!0,configurable:!0}),e.prototype.render=function(t){t.save(),t.translate(this.x,this.y),t.rotate(this.rotation/180*Math.PI),t.scale(this.scale,this.scale),this.elements.forEach((function(e){return e.render(t)})),t.restore()},e.prototype.contain=function(t,e){var o=this.x,n=this.y,r=this.width,i=this.height;return t>=o&&t<=o+r&&e>=n&&e<=n+i},e.prototype.add=function(t){this.elements.includes(t)||(t.parent=this,this instanceof a.default?t.root=this.root||this:t.root=this.root,this.elements.push(t))},e.prototype.remove=function(t){var e=this.elements.indexOf(t);e>-1&&(this.elements.splice(e,1),t.parent=null,t.root=null)},e.prototype.clear=function(){this.elements.forEach((function(t){t.parent=null,t.root=null})),this.elements.splice(0,this.elements.length)},e}(i.default);e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(10),a=0,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id="TopoElement_"+a++,e.text="",e.textPosition="center-bottom",e.fontSize=12,e.textColor="#333",e.shadowColor="rgba(255, 255, 255, 0)",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.opacity=1,e.visible=!0,e}return r(e,t),e.prototype.contain=function(t,e){return!1},e.prototype.show=function(){this.visible=!0},e.prototype.hide=function(){this.visible=!1},e}(i.default);e.default=s},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),o(7)},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(8),r=o(19),i=o(20),a=o(21),s=n.default.init();r.default(s),i.default(s),s.resize(window.innerWidth,window.innerHeight),document.body.style.margin="0",document.body.appendChild(s.canvas);var u=function(t,e){return void 0===t&&(t=300),Math.round(Math.random()*(e-t))+t},h=window.innerWidth-200,f=window.innerHeight-200;!function(t,e){var o=[],r={};t.forEach((function(t){var e=new n.default.TopoNode;Object.assign(e,t),o.push(e),r[t.id]=e})),e.forEach((function(t){var e=new n.default[t.type];e.lineWidth=t.lineWidth,e.lineDash=t.lineDash,e.color=t.color,t.points.forEach((function(t){return e.points.push(r[t])})),s.add(e)}));var u=new n.default.TopoCurve;u.points.push(o[3],{x:100,y:100},{x:500,y:500},o[4]),s.add(u),o.forEach((function(t){s.add(t),i.default(t),a.default(t)}))}([{type:"TopoNode",id:"0",x:u(100,h),y:u(100,f),backgroundColor:"#a5f",text:"Topo Node",width:60,height:60},{type:"TopoNode",id:"1",x:u(100,h),y:u(100,f),opacity:.5},{type:"TopoNode",id:"2",x:u(100,h),y:u(100,f),rotation:45},{type:"TopoNode",id:"3",x:u(100,h),y:u(100,f),borderWidth:1,borderColor:"#666"},{type:"TopoNode",id:"4",x:u(100,h),y:u(100,f),shadowBlur:6,shadowColor:"#666",shadowOffsetX:3,shadowOffsetY:5},{type:"TopoNode",id:"5",x:u(100,h),y:u(100,f),backgroundColor:"#5af"},{type:"TopoNode",id:"6",x:u(100,h),y:u(100,f),backgroundColor:"#f5a"}],[{type:"TopoEdge",points:["1","4"],lineWidth:1,color:"#333",lineDash:[0]},{type:"TopoZEdge",points:["2","5"],lineWidth:1,color:"#333",lineDash:[5,5]},{type:"TopoSEdge",points:["3","6"],lineWidth:1,color:"#fa5",lineDash:[0]}]),function t(){window.requestAnimationFrame(t),s.render()}(),s.on("mouseenter",(function(t){t.stopPropagation(),t.target.shadowBlur=6,t.target.shadowOffsetX=2,t.target.shadowOffsetY=2,t.target.shadowColor="#000"})),s.on("mouseleave",(function(t){t.stopPropagation(),t.target.shadowBlur=0})),window.onresize=function(){s.resize(window.innerWidth,window.innerHeight)}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(9),r=o(1),i=o(13),a=o(14),s=o(15),u=o(3),h={TopoNode:n.default,TopoEdge:r.default,TopoZEdge:i.default,TopoSEdge:a.default,TopoCurve:s.default,init:function(){return new u.default}};e.default=h},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=t.call(this)||this;return e.type="TopoNode",e.icon="",e.backgroundColor="#fa5",e.width=50,e.height=50,e}return r(e,t),e.prototype.render=function(t){var e=this,o=e.x,n=e.y,r=e.width,i=e.height,a=e.shadowOffsetX,s=e.shadowOffsetY,u=e.shadowColor,h=e.shadowBlur,f=e.borderWidth,c=e.borderColor,l=e.backgroundColor,d=e.opacity;t.save(),t.translate(o,n),t.rotate(this.rotation/180*Math.PI),t.translate(-r/2,-i/2),t.scale(this.scale,this.scale),t.globalAlpha=d,f&&(t.lineWidth=f,t.strokeStyle=c,t.strokeRect(0,0,r,i)),h&&(t.shadowOffsetX=a,t.shadowOffsetY=s,t.shadowColor=u,t.shadowBlur=h),t.fillStyle=l,t.fillRect(0,0,r,i),this.text&&this.drawText(t),t.restore()},e.prototype.contain=function(t,e){var o=this.width,n=this.height;return t>=-o/2&&t<=o/2&&e>=-n/2&&e<=n/2},e}(o(0).default);e.default=i},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=new WeakMap,r=function(t,e,o){var r,i=n.has(t);return i&&(i=(r=n.get(t)[e])&&r.includes(o)),i},i=function(t,e,o){var r;n.has(t)?r=n.get(t):(r={},n.set(t,r)),r[e]=r[e]||[],r[e].push(o)},a=function(t,e,o){if(e)if(o){var r=n.get(t)[e],i=r.indexOf(o);i>-1&&r.splice(i,1)}else n.get(t)[e]=[];else n.delete(t)},s=function(t,e){return n.has(t)?n.get(t)[e]:null},u=function(){function t(){}return t.prototype.on=function(t,e){r(this,t,e)||i(this,t,e)},t.prototype.off=function(t,e){a(this,t,e)},t.prototype.dispatch=function(t){var e=this,o=s(this,t.type);o&&o.forEach((function(o){return o.call(e,t)}))},t}();e.default=u},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.matrix=function(t,e,o,n,r,i){var a=this.x,s=this.y;return this.x=t*a+e*s+o,this.y=n*a+r*s+i,this},t.prototype.translate=function(t,e){return this.matrix(1,0,t,0,1,e)},t.prototype.scale=function(t,e){return this.matrix(t,0,0,0,e,0)},t.prototype.rotate=function(t){t=t/180*Math.PI;var e=Math.cos(t),o=Math.sin(t);return this.matrix(e,-o,0,o,e,0)},t.prototype.skewX=function(t){t=t/180*Math.PI;var e=Math.tan(t);return this.matrix(1,e,0,0,1,0)},t.prototype.skewY=function(t){t=t/180*Math.PI;var e=Math.tan(t);return this.matrix(1,0,0,e,1,0)},t}();e.default=n},function(t,e,o){"use strict";var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<o;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)n[r]=i[a];return n};Object.defineProperty(e,"__esModule",{value:!0});var r={add:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=[];return t.forEach((function(t){t.forEach((function(t,e){o[e]=o[e]?o[e]+t:t}))})),o},deduct:function(t,e){var o=n(t);return e.forEach((function(t,e){o[e]=(o[e]||0)-t})),o},norm:function(t){if(0!==t.length)return Math.pow(t.reduce((function(t,e){return t+e*e}),0),1/t.length)},dot:function(t,e){for(var o=Math.min(t.length,e.length),n=0,r=-1;++r<o;)n+=t[r]*e[r];return n},crossNorm:function(t,e){return Math.abs(t[0]*e[1]-t[1]*e[0])},multiply:function(t,e){return t.map((function(t){return t*e}))},cos:function(t,e){return this.dot(t,e)/this.norm(t)/this.norm(e)},angle:function(t,e){return Math.acos(this.cos(t,e))}};e.default=r},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),a=o(2),s=function(t){function e(){var e=t.call(this)||this;return e.type="TopoZEdge",e}return r(e,t),e.prototype.render=function(t){var e=this,o=this.points.map((function(t){return e.getCoord(t)})),n=o[0],r=n.x,i=n.y,a=o[1],s=a.x,u=a.y;t.save(),t.beginPath(),t.moveTo(r,i),t.lineTo((r+s)/2,i),t.lineTo((r+s)/2,u),t.lineTo(s,u),t.globalAlpha=this.opacity,this.shadowBlur&&(t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor),t.setLineDash(this.lineDash),t.lineWidth=this.lineWidth,t.strokeStyle=this.color,t.stroke(),t.closePath(),t.restore()},e.prototype.contain=function(t,e){for(var o=this.getCoord(this.points[0]),n=o.x,r=o.y,i=this.getCoord(this.points[1]),s=i.x,u=i.y,h=(n+s)/2,f=[[n,r],[h,r],[h,u],[s,u]],c=-1;++c<3;)if(a.default(f[c][0],f[c][1],f[c+1][0],f[c+1][1],t,e))return!0;return!1},e}(i.default);e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),a=o(2),s=function(t){function e(){var e=t.call(this)||this;return e.type="TopoSEdge",e}return r(e,t),e.prototype.render=function(t){var e=this,o=this.points.map((function(t){return e.getCoord(t)})),n=o[0],r=n.x,i=n.y,a=o[1],s=a.x,u=a.y;t.save(),t.beginPath(),t.moveTo(r,i),t.lineTo(r,(i+u)/2),t.lineTo(s,(i+u)/2),t.lineTo(s,u),t.globalAlpha=this.opacity,this.shadowBlur&&(t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor),t.setLineDash(this.lineDash),t.lineWidth=this.lineWidth,t.strokeStyle=this.color,t.stroke(),t.closePath(),t.restore()},e.prototype.contain=function(t,e){for(var o=this,n=this.points.map((function(t){return o.getCoord(t)})),r=n[0],i=r.x,s=r.y,u=n[1],h=u.x,f=u.y,c=(s+f)/2,l=[[i,s],[i,c],[h,c],[h,f]],d=-1;++d<3;)if(a.default(l[d][0],l[d][1],l[d+1][0],l[d+1][1],t,e))return!0;return!1},e}(i.default);e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),a=o(16),s=function(t){function e(){var e=t.call(this)||this;return e.type="TopoCurve",e}return r(e,t),e.prototype.render=function(t){var e=this,o=this.points.map((function(t){return e.getCoord(t)})),n=o[0],r=n.x,i=n.y,a=o[1],s=a.x,u=a.y,h=o[2],f=h.x,c=h.y,l=o[3],d=l.x,p=l.y;t.save(),t.beginPath(),t.moveTo(r,i),t.bezierCurveTo(s,u,f,c,d,p),t.globalAlpha=this.opacity,this.shadowBlur&&(t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor),t.setLineDash(this.lineDash),t.lineWidth=this.lineWidth,t.strokeStyle=this.color,t.stroke(),t.closePath(),t.restore()},e.prototype.contain=function(t,e){var o=this,n=this.points.map((function(t){return o.getCoord(t)})),r=n[0],i=r.x,s=r.y,u=n[1],h=u.x,f=u.y,c=n[2],l=c.x,d=c.y,p=n[3],y=p.x,v=p.y;return a.default(i,s,h,f,l,d,y,v,t,e)},e}(i.default);e.default=s},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=document.createElement("canvas").getContext("2d");e.default=function(t,e,o,r,i,a,s,u,h,f){var c;return n.beginPath(),n.moveTo(t,e),n.bezierCurveTo(o,r,i,a,s,u),c=n.isPointInStroke(h,f),n.closePath(),c}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(18),r=o(4),i=o(0);e.default=function(t){var e,o,a,s=[],u=t.canvas,h=function(t,e,o){var r=new n.default(t,o.offsetX,o.offsetY);r.target=e[e.length-1],r.path=e,r.originalEvent=o,r.trigger()},f={contextmenu:function(t){t.preventDefault()},mousedown:function(t){o=!0,e=!1,h("mousedown",s,t)},mousemove:function(n){if(o)e?h("drag",s,n):(h("dragstart",s,n),e=!0);else{var a,u;a=s,u=s[s.length-1],function(e){var o=function(t,e,n){if(t instanceof i.default){var a=t.getRelativeCoord(e,n);e=a.x,n=a.y}t.contain(e,n)&&s.push(t),t instanceof r.default&&t.children.forEach((function(t){return o(t,e,n)}))};s=[],o(t,e.offsetX,e.offsetY)}(n),u===s[s.length-1]?h("mousemove",s,n):(u&&h("mouseleave",a,n),h("mouseenter",s,n))}},mouseup:function(t){e?h("dragend",s,t):0===t.button?(0===a&&setTimeout((function(){2===a&&(h("dblclick",s,t),a=0)}),300),h("click",s,t),a++):2===t.button&&h("contextmenu",s,t),h("mouseup",s,t),e=!1,o=!1},mouseenter:function(t){h("mouseenter",s,t)},mouseleave:function(t){e=!1,o=!1,h("mouseleave",s,t)},mousewheel:function(t){t.preventDefault(),h("mousewheel",s,t)},DOMMouseScroll:function(t){t.preventDefault(),h("mousewheel",s,t)}};for(var c in f)u.addEventListener(c,f[c])}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,o){this.type=t,this.x=e,this.y=o,this._preventDefault=!1,this._stopPropagation=!1,this.target=null,this.path=[],this.originalEvent=null}return t.prototype.stopPropagation=function(){this._stopPropagation=!0},t.prototype.preventDefault=function(){this._preventDefault=!0},t.prototype.trigger=function(){for(var t=this.path.length;--t>-1&&(this.path[t].dispatch(this),!this._stopPropagation););},t}();e.default=n},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.on("mousewheel",(function(e){e.preventDefault();var o,n,r,i=e.originalEvent,a=i.deltaY||i.detail,s=t.scale,u=i.x,h=i.y;if(t.parent){var f=t.parent.getRelativeCoord(u,h);u=f.x,h=f.y}t.zoom(a<0),r=t.scale/s,o=u-t.x,n=h-t.y,o=u-o*r-t.x,n=h-n*r-t.y,t.translate(o,n)}))}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e,o;t.on("mousedown",(function(t){t.stopPropagation(),t.originalEvent.target.style.cursor="move"})),t.on("dragstart",(function(t){t.stopPropagation(),t.originalEvent.target.style.cursor="move",e=t.originalEvent.offsetX,o=t.originalEvent.offsetY})),t.on("drag",(function(n){var r,i;if(n.stopPropagation(),t.parent){var a=t.parent.getRelativeCoord(e,o),s=a.x,u=a.y,h=t.parent.getRelativeCoord(n.originalEvent.offsetX,n.originalEvent.offsetY);r=h.x-s,i=h.y-u}else r=n.originalEvent.offsetX-e,i=n.originalEvent.offsetY-o;t.translate(r,i),e=n.originalEvent.offsetX,o=n.originalEvent.offsetY})),t.on("mouseup",(function(t){t.stopPropagation(),t.originalEvent.target.style.cursor="default"}))}},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(0),a=o(4),s=o(3),u=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[-1,0,"w"],[1,0,"e"],[-1,1,"sw"],[0,1,"s"],[1,1,"se"]],h=function(t){function e(e){var o=t.call(this)||this;return o.target=e,u.forEach((function(t){var e=t[0],n=t[1],r=t[2],i=new f(e,n,r);!function(t){var e,o;t.on("mouseenter",(function(t){t.stopPropagation(),t.originalEvent.target.style.cursor="move"})),t.on("mouseleave",(function(t){t.stopPropagation(),t.originalEvent.target.style.cursor="default"})),t.on("dragstart",(function(t){t.stopPropagation(),e=t.originalEvent.offsetX,o=t.originalEvent.offsetY})),t.on("drag",(function(n){var r,i;if(n.stopPropagation(),t.parent){var a=t.parent.getRelativeCoord(e,o),s=a.x,u=a.y,h=t.parent.getRelativeCoord(n.originalEvent.offsetX,n.originalEvent.offsetY);r=h.x-s,i=h.y-u}else r=n.originalEvent.offsetX-e,i=n.originalEvent.offsetY-o;!function(t,e,o,n){t.x,t.y;var r=t.width,i=t.height;switch(n){case"n":t.height=Math.max(0,i-o),t.y-=(t.height-i)/2;break;case"s":t.height=Math.max(0,i+o),t.y+=(t.height-i)/2;break;case"w":t.width=Math.max(0,r-e),t.x-=(t.width-r)/2;break;case"e":t.width=Math.max(0,r+e),t.x+=(t.width-r)/2;break;case"ne":t.height=Math.max(0,t.height-o),t.width=Math.max(0,t.width+e),t.x+=(t.width-r)/2,t.y-=(t.height-i)/2;break;case"se":t.height=Math.max(0,t.height+o),t.width=Math.max(0,t.width+e),t.x+=(t.width-r)/2,t.y+=(t.height-i)/2;break;case"nw":t.height=Math.max(0,t.height-o),t.width=Math.max(0,t.width-e),t.x-=(t.width-r)/2,t.y-=(t.height-i)/2;break;case"sw":t.height=Math.max(0,t.height+o),t.width=Math.max(0,t.width-e),t.x-=(t.width-r)/2,t.y+=(t.height-i)/2}}(t.parent.target,r,i,t.dir),e=n.originalEvent.offsetX,o=n.originalEvent.offsetY}))}(i),o.add(i)})),o}return r(e,t),e.prototype.render=function(t){var e=this.target,o=e.x,n=e.y,r=(e.width,e.height,e.rotation),i=e.scale;t.save(),t.translate(o,n),t.rotate(r/180*Math.PI),t.scale(i,i),this.children.forEach((function(e){return e.render(t)})),t.restore()},e.prototype.getRelativeCoord=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),this.target.getRelativeCoord(t,e)},e.prototype.contain=function(){return!1},e}(a.default),f=function(t){function e(e,o,n){var r=t.call(this)||this;return r.width=6,r.height=6,r.ox=e,r.oy=o,r.dir=n,r}return r(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this.parent.target.width/2*this.ox},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.parent.target.height/2*this.oy},enumerable:!0,configurable:!0}),e.prototype.render=function(t){var e=this.x,o=this.y;e-=this.width/2,o-=this.height/2,t.save(),t.fillStyle="#fff",t.strokeStyle="#000",t.lineWidth=1,t.fillRect(e,o,this.width,this.height),t.strokeRect(e,o,this.width,this.height),t.restore()},e.prototype.contain=function(t,e){var o=this.width,n=this.height;return t>=-o/2&&t<=o/2&&e>=-n/2&&e<=n/2},e}(i.default);e.default=function(t){if(t instanceof s.default)throw Error("TopoView element resizement not supported");t.resizable=!1,t.root.on("click",(function(e){t.resizable&&e.target!==t&&function(t){t.resizable=!1;var e=t.parent.children.filter((function(e){return e instanceof h&&e.target===t}))[0];t.parent.remove(e)}(t)})),t.on("click",(function(e){t.resizable||function(t){var e=t.parent,o=new h(t);e.add(o),t.resizable=!0,console.log(e)}(t)}))}}]);